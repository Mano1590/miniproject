import com.google.gson.Gson;
import com.google.gson.JsonArray;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import okhttp3.OkHttpClient;
import okhttp3.Request;
import okhttp3.Response;

import java.io.IOException;

public class WeatherForecastApp {
    private static final String API_KEY = "your_api_key";

    public static void main(String[] args) {
        String location = "Tamil Nadu"; 

        try {
            String weatherData = getWeatherData(location);

            displayCurrentWeather(weatherData);
            displayForecast(weatherData);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private static String getWeatherData(String location) throws IOException {
        OkHttpClient client = new OkHttpClient();

        String url = "https://api.openweathermap.org/data/2.5/weather?q=" + location + "&appid=" + API_KEY;

        Request request = new Request.Builder()
                .url(url)
                .build();

        try (Response response = client.newCall(request).execute()) {
            return response.body().string();
        }
    }

    private static void displayCurrentWeather(String weatherData) {
        JsonObject jsonObject = JsonParser.parseString(weatherData).getAsJsonObject();
        JsonObject main = jsonObject.getAsJsonObject("main");
        JsonElement temp = main.get("temp");
        JsonElement humidity = main.get("humidity");
        JsonArray weatherArray = jsonObject.getAsJsonArray("weather");
        JsonObject weather = weatherArray.get(0).getAsJsonObject();
        String description = weather.get("description").getAsString();

        System.out.println("Current Weather Conditions:");
        System.out.println("Temperature: " + temp.getAsDouble() + " K");
        System.out.println("Humidity: " + humidity.getAsDouble() + "%");
        System.out.println("Description: " + description);
        System.out.println();
    }

    private static void displayForecast(String weatherData) {
        JsonObject jsonObject = JsonParser.parseString(weatherData).getAsJsonObject();
        JsonArray forecastArray = jsonObject.getAsJsonArray("list");

        System.out.println("Weather Forecast:");

        for (JsonElement element : forecastArray) {
            JsonObject forecast = element.getAsJsonObject();
            JsonObject main = forecast.getAsJsonObject("main");
            JsonElement temp = main.get("temp");
            JsonElement humidity = main.get("humidity");
            JsonArray weatherArray = forecast.getAsJsonArray("weather");
            JsonObject weather = weatherArray.get(0).getAsJsonObject();
            String description = weather.get("description").getAsString();
            String dateTime = forecast.get("dt_txt").getAsString();

            System.out.println("Date/Time: " + dateTime);
            System.out.println("Temperature: " + temp.getAsDouble() + " K");
            System.out.println("Humidity: " + humidity.getAsDouble() + "%");
            System.out.println("Description: " + description);
            System.out.println();
        }
    }
}

Simple Output :

Current Weather Conditions:
Temperature: 20.5 K
Humidity: 75%
Description: Cloudy

Weather Forecast:
Date/Time: 2023-06-24 12:00:00
Temperature: 22.3 K
Humidity: 70%
Description: Partly cloudy

Date/Time: 2023-06-26 12:00:00
Temperature: 23.8 K
Humidity: 65%

Date/Time: 2023-06-27 12:00:00
Temperature: 25.1 K
Humidity: 60%
Description: Clear sky

...






